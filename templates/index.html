{% extends "base.html" %}
{% block title %}Dashboard{% endblock %}
{% block content %}
<div class="header">
  <h1 class="title">Election Voting System</h1>
  {% if admin %}
  <a class="btn subtle" href="{{ url_for('logout') }}">Logout</a>
  {% else %}
  <a class="btn primary" href="{{ url_for('login') }}">Admin Login</a>
  {% endif %}
</div>

{% with messages = get_flashed_messages(with_categories=true) %}
{% if messages %}
  {% for cat, msg in messages %}
    <div class="flash {{ cat }}">{{ msg }}</div>
  {% endfor %}
{% endif %}
{% endwith %}

{% if admin %}
<div class="grid">
  <a class="btn block" href="{{ url_for('voters') }}">👥 Voters List</a>
  <a class="btn block" href="{{ url_for('add_voter') }}">➕ Add Voter</a>
  <a class="btn block" href="{{ url_for('stats') }}">📊 Live Stats</a>
  <a class="btn block" href="{{ url_for('download_excel') }}">⬇️ Download Excel</a>
  <a class="btn block" href="{{ url_for('download_csv') }}">⬇️ Download CSV</a>
</div>
<div class="muted mt-2 center-text">
  Total: <b>{{ total }}</b> | Voted: <b>{{ voted }}</b> | Not voted: <b>{{ total - voted }}</b>
</div>
{% else %}
<div class="muted center-text">Please login to manage voters or view stats.</div>
{% endif %}
{% endblock %}
